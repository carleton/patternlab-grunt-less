(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;u="<div class='loading'>Loading...</div>",window.console||(window.console={}),window.console.log||(window.console.log=function(){}),w=!1,f=[],A=["bannerSearch","bannerSearchImage","bannerSearchDialog"],v=!1,g=["bbForLink","bbForArrow","bbForList"],k=function(a){var b,c,d,e,g,h,i,j,k,l,m,n;for(c=document.getElementById("bbTabContent"),null!==c&&(c.style.display="none",H(!0)),e=g=0,i=f.length;g<i;e=++g)f[e],null!==(l=document.getElementById("menuContents"+e))&&(l.style.display="");for(z(document.getElementById("bbFor"),"current"),k=document.getElementById("bbMenu"),b=document.getElementById("carletonBanner"),m=b.children,n=[],h=0,j=m.length;h<j;h++){if(d=m[h],r(d,"closer")){b.insertBefore(k,d);break}n.push(void 0)}return n},l=function(a){var b,c,d,e,g,h,i,k,l,m,n,o,p,q;for(o=r(document.getElementById("menuToggle"),"current"),d=e=0,h=f.length;e<h;d=++e)k=f[d],n=document.getElementById("menuContents"+d),o||z(k.parentNode,"current"),null!==n&&(n.style.display="none"),o&&r(k.parentNode,"current")&&(console.log("[A] "+k.getAttribute("data-target")+" is open..."),j(k,!1));for(m=document.getElementById("bbMenu"),b=document.getElementById("carletonBanner"),l=b.children[0],q=null,p=l.children,g=0,i=p.length;g<i;g++)c=p[g],r(c,"search")&&(q=c);return l.insertBefore(m,q)},c=[{name:"small",max:650,fxn:k},{name:"big",fxn:l}],e=-1,p=function(){var a,b,d,f,g,h;for(h=window.innerWidth,g=-1,b=d=0,f=c.length;d<f;b=++d)if(a=c[b],void 0===a.max)g=b;else if(a.max>=h){g=b;break}if(g!==e)return e=g,console.log("switching to ["+e+"] / ["+c[e].name+"]"),(0,c[e].fxn)(c[e].name)},d={},i=function(a,b){var c,e;try{return console.log("requesting ["+a+"]"),void 0!==d[a]?void b(d[a],null):(e=new XMLHttpRequest,e.open("GET",a,!0),e.onreadystatechange=function(){4===e.readyState&&(200===e.status?(d[a]=e.responseText,b(e.responseText,null)):b(null,"200 error"))},e.send())}catch(f){return c=f,console.log("Exception occurred while trying request."),b(null,"exception: "+c)}},b=function(a,b,c){return"string"==typeof a&&(a=document.getElementById(a)),a.addEventListener(b,function(a){return a.preventDefault(),c(a)})},t=function(a){var b;return b=a.getBoundingClientRect(),b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)},j=function(c,d){var f,g,h,k,l,n,o,p,q;if(null==d&&(d=!0),console.log("getTabContent firing..."),p="bbTabContent",g=document.getElementById(p),q=c.getAttribute("data-target"),d&&0===e&&r(c.parentNode,"current"))return void z(c.parentNode,"current");for(o=document.getElementsByTagName("a"),h=k=0,l=o.length;k<l;h=++k)n=o[h],void 0!==n.attributes["data-target"]&&z(n.parentNode,"current");return d&&0!==e&&null!==g&&g.getAttribute("data-target")===q?(g.parentNode.removeChild(g),!1):(a(c.parentNode,"current"),0===e&&setTimeout(function(){var a,b;if(!t(c))return a=c.getBoundingClientRect(),b=window.pageYOffset+a.top,scrollTo(0,b)},100),0!==e?(null!==g&&g.parentNode.removeChild(g),f=document.createElement("div"),f.id=p,f.setAttribute("data-target",q),f.setAttribute("aria-live","polite"),f.innerHTML=u,document.getElementById("carletonBanner").appendChild(f),i(q,function(a,d){var e,g,h,i,k,l,n;if(null!==d)return h=""+c,window.location.href=h;for(f.innerHTML=a,n=f.getElementsByTagName("div"),k=0,l=n.length;k<l;k++)g=n[k],r(g,"closer")&&(e=g.getElementsByTagName("a")[0],b(e,"click",function(){return j(c)}),e.addEventListener("keydown",function(a){return m(a,!1)}));return i=document.querySelector("div#bbTabContent div.tops a"),i.addEventListener("keydown",function(a){return m(a,!0)})}),!1):void 0)},n=function(a){var b,c,d,e;if(a.shiftKey);else if(9===a.keyCode&&(c=a.target.getAttribute("data-target"),null!==(b=document.getElementById("bbTabContent"))&&(d=b.getAttribute("data-target"),c===d)))return e=document.getElementById("bbTabContent").querySelector("a"),e.focus(),a.preventDefault()},m=function(a,b){var c,d,e,f,g,h,i;if(9===a.keyCode&&(b&&a.shiftKey||!b&&!a.shiftKey))for(h=document.getElementById("bbMenu"),e=!1,i=h.querySelectorAll("li"),d=0,f=i.length;d<f;d++){if(g=i[d],c=g.querySelector("a"),e)return b||c.focus(),void a.preventDefault();r(g,"current")&&(e=!0,b&&c.focus())}},s=function(a,b){var c,d,e;if(null===a)return!1;for(c=0,d=b.length;c<d;c++)if(e=b[c],a===e)return!0;return s(a.parentNode,b)},y=function(a){var b,c,d,e,g,h,i,j;if(w){if(c=document.elementFromPoint(a.clientX,a.clientY),"scope"===a.target.getAttribute("name")&&"radio"===a.target.getAttribute("type"))return;for(j=[],d=0,g=A.length;d<g;d++)b=A[d],j.push(document.getElementById(b));for(e=0,h=f.length;e<h;e++)i=f[e],j.push(i);if(!s(c,j))return C(!1)}},C=function(b){var c;return c=document.getElementById("bannerSearchForm"),b?(a(c,"focused"),w=!0,document.getElementById("bannerSearchImage").setAttribute("aria-hidden","true")):(z(c,"focused"),z(c,"active"),w=!1,document.getElementById("bannerSearchImage").removeAttribute("aria-hidden"))},z=function(a,b){return B(a,b,!1)},a=function(a,b){return B(a,b,!0)},G=function(b,c){return r(b,c)?z(b,c):a(b,c)},r=function(a,b){var c,d,e;for(c=a.className.split(" "),d=0,e=c.length;d<e;d++)if(c[d]===b)return!0;return!1},B=function(a,b,c){var d,e,f,g,h,i;for(d=a.className.split(" "),i="",h=c,e=0,f=d.length;e<f;e++)g=d[e],c?(g===b&&(h=!1),i+=(""===i?"":" ")+g):g!==b&&(i+=(""===i?"":" ")+g);return h&&(i+=(""===i?"":" ")+b),""===i?a.removeAttribute("class"):a.className=i},E=function(){var c,d,e,f,g,h,i,j,k,l;for(j=document.getElementById("bluebar-search-data"),k=document.getElementById("bannerSearchDialog"),a(k,null!==j?"twoscope":"singlescope"),null!==j&&(l=j.getAttribute("data-site-name"),document.getElementById("searchLimitURL").setAttribute("value",j.getAttribute("data-site-url")),document.getElementById("searchLimitName").innerHTML=l),b("searchToggle","click",function(a){var b;return a.stopPropagation(),F(!1),b=document.getElementById("bannerSearchForm"),G(b,"active"),r(b,"active")?(document.getElementById("bannerSearch").focus(),w=!0):w=!1,!1}),b("bannerSearch","focus",function(){return C(!0)}),e=0,g=A.length;e<g;e++)if("bannerSearchDialog"===(c=A[e]))for(i=document.getElementById(c).querySelectorAll("input"),f=0,h=i.length;f<h;f++)d=i[f],d.addEventListener("keydown",q);else document.getElementById(c).addEventListener("keydown",q);return document.addEventListener("click",y)},o=function(a){return setTimeout(function(){if(!s(document.activeElement,[document.getElementById("bbFor")]))return F(!1)},100)},q=function(a){if(9===a.keyCode)return setTimeout(function(){var a,b,c,d;for(d=[],b=0,c=A.length;b<c;b++)a=A[b],d.push(document.getElementById(a));if(!s(document.activeElement,d))return C(!1)})},D=function(){var a,c,d,e,f;for(b("bbForLink","click",h),document.addEventListener("click",x),e=document.getElementById("bbFor").querySelectorAll("a"),f=[],a=0,c=e.length;a<c;a++)d=e[a],f.push(b(d,"blur",o));return f},h=function(a){var b;return b=document.getElementById("bbFor"),F(!r(b,"current")),!1},F=function(b){var c;return c=document.getElementById("bbFor"),b?(a(c,"current"),v=!0):(z(c,"current"),v=!1)},x=function(a){var b,c,d,e,h,i,j,k;if(a.target!==document.getElementById("bbForLink")&&v&&a.detail>0){for(c=document.elementFromPoint(a.clientX,a.clientY),k=[],d=0,h=g.length;d<h;d++)b=g[d],k.push(document.getElementById(b));for(e=0,i=f.length;e<i;e++)j=f[e],k.push(j);if(!s(c,k))return F(!1)}},H=function(b){var c,d,e,g,h,j,k,l,m,n,o;if(null==b&&(b=null),console.log("toggleMenu ["+b+"]"),j=document.getElementById("menuToggle"),o=!r(j,"current"),null!==b&&(o=b),o){for(a(j,"current"),a(document.getElementById("bbMenu"),"on"),m=[],d=e=0,g=f.length;e<g;d=++e)h=f[d],n=h.getAttribute("data-target"),l="menuContents"+d,k=document.getElementById(l),null===k?(c=document.createElement("div"),c.setAttribute("id",l),c.innerHTML="<section class='drawer'>"+u+"</section>",h.parentNode.appendChild(c),m.push((!function(a){return i(n,function(b,d){return null!==d?console.log("got back error?"):(c=document.getElementById("menuContents"+a),console.log("setting innerHTML on ["+c.getAttribute("id")+"]"),c.innerHTML=b)})})(d))):m.push(void 0);return m}return z(j,"current"),z(document.getElementById("bbMenu"),"on")},window.initialBluebarSetup=function(){var a,c,d,e,g,h,i,k,l,m;for(l=document.getElementsByTagName("a"),d=e=0,h=l.length;e<h;d=++e)k=l[d],void 0!==k.attributes["data-target"]&&(b(k,"click",function(a){return j(a.target)}),k.addEventListener("keydown",n),f.push(k));for(a=document.getElementById("carletonBanner"),a.className="js",m=a.children,g=0,i=m.length;g<i;g++)if(c=m[g],r(c,"closer")){b(c.children[0],"click",function(){return H()});break}return b("menuToggle","click",function(){return H()}),D(),E(),window.onresize=p,p()}}).call(this);